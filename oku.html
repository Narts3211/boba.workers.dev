<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Okuma Modu</title>
    <style>
        :root { --bg: #0b0e14; --reader-bg: #0f121a; --text: #d1d1d1; --accent: #3498db; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Georgia', serif; line-height: 1.8; margin: 0; padding: 0; }
        .container { max-width: 850px; margin: auto; padding: 40px 20px; min-height: 100vh; }
        
        #title { color: var(--accent); text-align: center; font-size: 1.6rem; margin-bottom: 30px; border-bottom: 1px solid #222; padding-bottom: 20px; font-family: sans-serif; font-weight: 800; }
        
        #content { white-space: pre-wrap; font-size: 1.2rem; background: var(--reader-bg); padding: 35px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); border: 1px solid #1a1e26; }

        .nav { display: flex; justify-content: space-between; margin: 40px 0; gap: 15px; }
        .btn { background: #1a1e26; color: var(--accent); text-decoration: none; border: 1px solid #333; padding: 14px 25px; border-radius: 10px; transition: 0.3s; flex: 1; text-align: center; font-family: sans-serif; font-weight: bold; font-size: 0.9rem; }
        .btn:hover { border-color: var(--accent); background: #222; transform: translateY(-2px); }
        .hidden { visibility: hidden; pointer-events: none; }
        
        @media (max-width: 600px) { #content { padding: 20px; font-size: 1.1rem; } .btn { padding: 12px 10px; font-size: 0.8rem; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <a href="index.html" class="btn">üè† Ana Sayfaya D√∂n</a>
        </div>
        
        <h2 id="title">B√∂l√ºm Y√ºkleniyor...</h2>
        <div id="content">Veriler i≈üleniyor, l√ºtfen bekleyin...</div>

        <div class="nav">
            <a id="prev" class="btn hidden">‚¨Ö √ñnceki B√∂l√ºm</a>
            <a id="next" class="btn hidden">Sonraki B√∂l√ºm ‚û°</a>
        </div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const b = parseInt(urlParams.get('b')) || 1;

        async function load() {
            const titleEl = document.getElementById('title');
            const contentEl = document.getElementById('content');

            try {
                // B√∂l√ºm listesini √ßek
                const nRes = await fetch('bolumler.json?v=' + Date.now());
                const names = await nRes.json();
                titleEl.innerText = names[b] || "B√∂l√ºm " + b;
                
                // Metni √ßek
                const cRes = await fetch(`bolumler/${b}.txt?v=` + Date.now());
                if(!cRes.ok) throw new Error("B√∂l√ºm i√ßeriƒüi hen√ºz eklenmemi≈ü.");
                contentEl.innerText = await cRes.text();

                // Navigasyon
                const keys = Object.keys(names).map(Number).sort((x,y) => x-y);
                const idx = keys.indexOf(b);

                if(idx > 0) {
                    const p = document.getElementById('prev');
                    p.href = `oku.html?b=${keys[idx-1]}`;
                    p.classList.remove('hidden');
                }
                if(idx < keys.length - 1) {
                    const n = document.getElementById('next');
                    n.href = `oku.html?b=${keys[idx+1]}`;
                    n.classList.remove('hidden');
                }
            } catch (e) {
                titleEl.innerText = "Hata";
                contentEl.innerText = e.message;
            }
        }
        load();
    </script>
</body>
</html>